




  ┌─────────────────────────────────────────────────────────────┐
  │                                                             │
  │                     INFOSERVICE LIMITED                     │
  │                      ─────────────────                      │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                       АРХИВАТОР  AIN                        │
  │                                                             │
  │                         Версия  2.1                         │
  │                                                             │
  │                  Руководство пользователя                   │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                                                             │
  │                       Санкт─Петербург                       │
  │                                                             │
  │                          ─ 1993 ─                           │
  │                                                             │
  └─────────────────────────────────────────────────────────────┘
 ---------------------------------------------------------------
                               - 2 -














     Документ содержит подробное, проиллюстрированное большим ко-
  личеством примеров  описание  использования  новых  программных
  средств для компьютеров типа IBM PC - архиватора AIN 2.1 и упа-
  ковщика EXE-файлов AINEXE 2.1.
     Программа AIN превосходит другие архиваторы (ARJ, PKZIP, LHA
  и т.д.)  по важнейшему  показателю - плотности упаковки данных.
  По другим показателям AIN сравним с лучшими из аналогов.
     Утилита AINEXE  используется для  экономии  пространства  на
  дисках, уменьшая  в 2 - 3  раза размер  больших EXE-файлов  без
  ущерба для их работоспособности.
     Новый программный  продукт распространяет в России ТОО Инфо-
  сервис.




























  Copyright (c) 1993  ТОО Инфосервис.
 ---------------------------------------------------------------
                               - 3 -



                        С О Д Е Р Ж А Н И Е



  1. ВВЕДЕНИЕ...................................................4
    1.1. Сравнение с аналогами..................................4
    1.2. Основные особенности...................................6
    1.3. Сравнение с предыдущей версией.........................8
    1.4. Коммерческая информация................................8

  2. АРХИВАТОР AIN..............................................8
    2.1. Вызов из командной строки..............................8
    2.2. Команды архиватора....................................11
      2.2.1. Команда A - добавить новые файлы в архив и
             заменить существующие.............................11
      2.2.2. Команда D - удалить файлы из архива...............12
      2.2.3. Команда E - извлечь файлы из архива...............13
      2.2.4. Команда F - обновить устаревшие файлы.............14
      2.2.5. Команда L - выдать информацию о файлах архива.....15
      2.2.6. Команда M - добавить и удалить добавленные файлы
	     с диска...........................................15
      2.2.7. Команда T - проверить целостность архива..........16
      2.2.8. Команда U - заменить устаревшие файлы и добавить
             новые.............................................16
      2.2.9. Команда V - выдать полную информацию о файлах
             архива............................................17
      2.2.10. Команда X - извлечь файлы c полными путями.......17
      2.2.11. Команда Y - измененить характеристики архива.....18
    2.3. Опции архиватора......................................18
      2.3.1. Опция F - разделить архив на фрагменты............18
      2.3.2. Опция H - выдать справку о программе AIN..........21
      2.3.3. Опция G - зашифровать архив с паролем.............22
      2.3.4. Опция M - определить метод упаковки данных........23
      2.3.5. Опция O - определить выходной каталог.............23
      2.3.6. Опция P - использовать полные пути................24
      2.3.7. Опция R - искать файлы в подкаталогах.............24
      2.3.8. Опция S - установить дату/время архива по самому
             новому файлу......................................24
      2.3.9. Опция U - определить скорость обновления архива...25
      2.3.10. Опция W - определить каталог для временных
             файлов............................................26
      2.3.11. Опция X - исключить файлы из обработки...........26
      2.3.12. Опция Y - ответить ДА на запрос архиватора.......27
    2.4. Переменная окружения AIN_SW...........................27

  3. УТИЛИТА AINEXT............................................28

  4. УТИЛИТА AINEXE............................................29
 ---------------------------------------------------------------
                               - 4 -



                            1. ВВЕДЕНИЕ


     1.1. Сравнение с аналогами

     В настоящее время на компьютерах IBM PC имеют расространение
  не менее  десяти архиваторов, которые различаются как по объему
  реализуемых  функций,  так  и  по  техническим  характеристикам
  (плотности  упаковки  данных  и  скорости  работы).  Лидирующее
  положение среди  них занимают,  по-видимому,  две  программы  -
  ARJ версии 2.30 и PKZIP версии 2.01.
     ARJ 2.30 безусловно  превосходит все остальные архиваторы по
  объему реализуемых  функций и  уступает по техническим характе-
  ристикам только PKZIP 2.01.
     Главной особенностью  PKZIP 2.01 является  высокая  скорость
  работы (в  1.5-2.5 раза  превосходящая ARJ).  По плотности упа-
  ковки PKZIP  почти не  уступает (а  на некоторых  тестах и пре-
  восходит) ARJ.

     ТОО Инфосервис  предлагает новый  архиватор AIN версии  2.1.
  Его основным  достоинством является высокая плотность упаковки.
  Особенно заметно  это проявляется при архивации множества одно-
  типных файлов  (например, содержащих  исходные тексты различных
  модулей одной программы или финансовые документы, относящиеся к
  различным периодам деятельности предприятия). В этих случаях он
  показывает  нередко  в  1.5 - 2  раза  лучшие  результаты,  чем
  перечисленные выше  ARJ и  PKZIP. В  среднем  преимущество  AIN
  составляет, как правило, 10 - 20%.
     По скорости  работы AIN также превосходит ARJ 2.30 в 1.5 - 2
  раза, PKZIP  - на  10 - 20%. Технические  характеристики лучших
  архиваторов иллюстрирует  таблица 1 (помимо  перчисленных в нее
  включена предыдущая  версия AIN  (AIN 2.0) и часто используемый
  архиватор LHA версии 2.13).
     По объему  функций AIN  2.1 вполне  сравним с ARJ 2.30. Хотя
  AIN   и не  реализует некоторые редко используемые функции ARJ,
  но  предоставляет   пользователю  ряд   отсутствующих   у   ARJ
  возможностей. Например,  он позволяет копировать архивы с диска
  на диск с преобразованием однотомного архива в многотомный (это
  бывает  полезно   для  записи   на  дискеты  архивированной  на
  винчестере информации). AIN имеет несравнимо более надежный ал-
  горитм шифровки  данных (у  ARJ шифровка  сводится к побайтовой
  перекодировке по зависящей от пароля таблице).
     Таким образом,  AIN 2.1 является  вполне конкурентоспособным
  программным продуктом.
 ---------------------------------------------------------------
			       - 5 -


                                                        ТАБЛИЦА 1

	 Сравнение характеристик лучших архиваторов IBM PC
	     (испытания проводились на IBM PC AT-286)

  ┌─────────────────────────────────────────────────────────────┐
  │ Архиватор│ Исходные файлы│  Размер    │ Время работы (сек.) │
  │          │               │  архива    │─────────────────────│
  │          │               │            │ Упаковка│ Распаковка│
  │──────────+───────────────+────────────+─────────+───────────│
  │LHA 2.13  │   78 файлов   │  50,337    │   23    │   31      │
  │ARJ 2.30  │    *.TXT      │  51,566    │   25    │   29      │
  │          │               │            │         │           │
  │PKZIP 2.01│               │  55,162    │   13    │   25      │
  │          │  общий объем  │            │         │           │
  │AIN 2.0   │   82,516 бт.  │  25,603    │   12    │   24      │
  │AIN 2.1   │               │  25,733    │   10    │   23      │
  │──────────+───────────────+────────────+─────────+───────────│
  │LHA 2.13  │   41 файл     │  57,051    │   25    │   18      │
  │ARJ 2.30  │     *.C       │  56,751    │   22    │   18      │
  │          │               │            │         │           │
  │PKZIP 2.01│               │  58,483    │   13    │   15      │
  │          │  общий объем  │            │         │           │
  │AIN 2.0   │   183,490 бт. │  42,760    │   16    │   16      │
  │AIN 2.1   │               │  42,805    │   12    │   13      │
  │──────────+───────────────+────────────+─────────+───────────│
  │LHA 2.13  │ 85 однотипных │  95,966    │   37    │   33      │
  │ARJ 2.30  │ документов    │  97,270    │   38    │   34      │
  │          │               │            │         │           │
  │PKZIP 2.01│               │ 101,108    │   21    │   28      │
  │          │  общий объем  │            │         │           │
  │AIN 2.0   │  250,548 бт.  │  56,074    │   21    │   28      │
  │AIN 2.1   │               │  56,386    │   17    │   27      │
  │──────────+───────────────+────────────+─────────+───────────│
  │LHA 2.13  │  10 файлов    │ 166,588    │   72    │   17      │
  │ARJ 2.30  │    *.DBF      │ 162,807    │   62    │   17      │
  │          │               │            │         │           │
  │PKZIP 2.01│               │ 165,011    │   29    │   12      │
  │          │  общий объем  │            │         │           │
  │AIN 2.0   │  703,914 бт.  │ 159,280    │   47    │   17      │
  │AIN 2.1   │               │ 158,494    │   30    │   11      │
  │──────────+───────────────+────────────+─────────+───────────│
  │LHA 2.13  │ 1  текстовый  │ 226,229    │   67    │   16      │
  │ARJ 2.30  │ файл (книга)  │ 207,510    │   60    │   14      │
  │          │               │            │         │           │
  │PKZIP 2.01│               │ 209,215    │   34    │    9      │
  │          │   размер      │            │         │           │
  │AIN 2.0   │  603,909 бт.  │ 203,548    │   50    │   13      │
  │AIN 2.1   │               │ 206,436    │   32    │    9      │
  └─────────────────────────────────────────────────────────────┘
 ---------------------------------------------------------------
			       - 6 -


     1.2. Основные особенности

     Программа-архиватор AIN версии 2.1 работает в среде операци-
  онной системы MS DOS версии не младше 2.0 и позволяет выполнять
  следующие функции:

     - Архивировать отдельные  файлы, каталоги  или целые  подде-
       ревья файловой системы MS DOS. Имена или шаблоны имен под-
       лежащих архивации  файлов могут  читаться как из командной
       строки, так и из файла.

     - Заменять, удалять  и добавлять  новые файлы в существующие
       архивы. Замена  устаревших файлов  архива может производи-
       ться автоматически,  что весьма удобно для регулярного ре-
       зервного сохранения измененных файлов.

     - Извлекать из  архива отдельные  файлы, каталоги  или  под-
       деревья и  размещать их  в заданном каталоге файловой сис-
       темы. При извлечении архиватор позволяет учитывать (или не
       учитывать) полные  пути записанных в архиве файлов.  Имена
       или шаблоны имен также могут читаться не только из команд-
       ной строки,  но и из файла. При извлечении восстанавливаю-
       тся все  атрибуты (защищенность  от записи,  дата/время  и
       пр.) исходного  файла. Необходимые  для размещения  извле-
       каемых файлов каталоги создаются автоматически.

     - Использовать при  архивации 4  различных способа  упаковки
       данных, обладающих различными характеристиками по плотнос-
       ти сжатия и скорости работы. Кроме того, на характеристики
       упаковки влияют 3 режима, определяющие скорость обновления
       архива, -  необновляемые и редко обновляемые архивы в ряде
       случаев могут упаковываться значительно плотнее и быстрее.

     - Создавать  архивы, состоящие из одного или нескольких фай-
       лов (фрагментов).  Отдельные фрагменты одного архива могут
       иметь различный  размер и  быть записаны  на разные  диски
       (например, если  в процессе архивации у вас кончились дис-
       кеты, то вы можете оставшуюся часть информации записать на
       дискеты другой емкости или на винчестер). Работать с фраг-
       ментом можно  как с  отдельным архивом или как с составной
       частью большего архива.

     - Изменять характеристики  упаковки существующих  архивов  и
       разделять их на фрагменты. Измененный архив может быть ли-
       бо размещен  на месте старого архива, либо выведен на дру-
       гой диск/каталог (старый архив в этом случае сохраняется в
       своем прежнем состоянии).

     - Получать на консоли компьютера или в файле на диске оглав-
       ление архива.  Оглавление может  включать либо  частичные,
       либо полные имена содержащихся в архиве файлов.

     - Производить контроль  целостности архива. Контроль целост-
       ности является  надежным  способом  обнаружения  случайных
 ---------------------------------------------------------------
                               - 7 -


       (вызванных физическими  дефектами  магнитных  носителей  и
       сбоями аппаратуры)  и преднамеренных нарушений в структуре
       архива или фрагмента.

     - Шифровать архивы.  Доступ к  файлам зашифрованного  архива
       возможен только  после указания  соответствующего  пароля,
       что является  надежным способом  защиты данных  от несанк-
       ционированного доступа.

     Команды и  опции AIN по своей мнемонике и семантике в основ-
  ном совпадают с соответсвующими командами и опциями других сов-
  ременных  архиваторов,   что  должно   облегчить  пользователям
  освоение AIN.
     Как и  другие архиваторы,  AIN ведет  на консоли оперативный
  отчет о  своей работе,  включающий имя  и процентный  индикатор
  готовности обрабатываемого в данный момент файла. Однако, в от-
  личие от  других, AIN ведет также процентный индикатор, отража-
  ющий степень  завершения всей  работы программы. Этот индикатор
  позволяет пользователю судить о времени, необходимом для завер-
  шения работы архиватора.
     Для просмотра и распаковки архивов можно использовать специ-
  альную утилиту  AINEXT, которая  дублирует аналогичные  функции
  самого архиватора. AINEXT следует применять для передачи архива
  в другие  организации, у  которых может не оказаться архиватора
  AIN. В  этом случае  на дискету  вместе с архивом рекомендуется
  записывать именно  утилиту AINEXT, а не сам AIN - это позволяет
  сэкономить пространство на дискете (файл AINEXT.EXE существенно
  короче, чем  AIN.EXE) и  избежать нарушения  авторских прав ТОО
  Инфосервис.

     В комплекте  с архиватором  AIN 2.1 распространяется утилита
  AINEXE 2.1 -  упаковщик EXE-файлов. Применение программы AINEXE
  позволяет, как  правило, в 2 - 3 раза уменьшить размер большого
  (более 100K  байтов) EXE-файла.  В случае  небольших EXE-файлов
  эффект применения  утилиты меньший. Упакованный программой EXE-
  файл вызывается  точно так  же, как он вызывался до упаковки, и
  сохраняет все  свои эксплуатационные характеристики. EXE-файлы,
  содержащие  оверлейные   (подгружаемые   в   процессе   работы)
  программы, чаще всего не могут быть исполнены после упаковки, о
  чем утилита  AINEXE (при  попытке упаковки такого файла) выдает
  соотвествующее сообщение.
     Утилита  AINEXE   эффективно  применяется   для   уменьшения
  размеров (часто очень больших) EXE-файлов, полученных при помо-
  щи различных СУБД (CLIPPER, FOXPRO и т.п.).
     Полезным  побочным   эффектом  применения   AINEXE  является
  достаточно надежная  защита упакованной  утилитой программы  от
  несанкционированного   изменения    выдаваемых   ею   сообщений
  (например, с  целью известной замены "IBM" на "ЕС ") или испол-
  няемых ею  команд (например, с целью отключения какого-либо ме-
  ханизма защиты). В упакованном представлении программы, с одной
  стороны, невозможно найти ни одного сообщения и ни одной машин-
  ной команды,  а с  другой - изменение в этом представлении хотя
  бы одного бита скорее всего приведет к полной потере работоспо-
  собности программы.  Поэтому перед  тем, как  "надругаться" над
 ---------------------------------------------------------------
                               - 8 -


  программой, ее EXE-файл необходимо восстановить в исходном (не-
  упакованном) виде, а решение этой задачи (в условиях отсутствия
  информации о  методах упаковки) требует серьезной, квалифициро-
  ванной работы. Успехов вам, господа хаккеры!
     Заметим, что  файлы AIN.EXE  и AINEXE.EXE распространяются в
  упакованном виде.

     1.3. Сравнение с предыдущей версией

     Архиватор AIN 2.1 по набору реализуемых функций, формату ко-
  манд и  опций ничем  не отличается от своей предыдущей версии -
  AIN 2.0.
     Версия 2.1  существенно  превосходит  AIN  2.0  по  скорости
  работы и несколько уступает ему по плотности упаковки (см. таб-
  лицу 1).
     Версии 2.0  и 2.1  несовместимы по  формату архива; поэтому,
  для того,  чтобы архив  версии 2.0 преобразовать в 2.1, необхо-
  димо распаковать  его при  помощи AIN 2.0 и вновь упаковать при
  помощи AIN 2.1.

     1.4. Коммерческая информация

     1. ТОО  Инфосервис ведет  работы, направленные  на  создание
  следующей версии своего архиватора - AIN 2.2, который, по срав-
  нению с  версиями 2.0  и 2.1, будет обладать улучшенными техни-
  ческими характеристиками и расширенным набором функций.
     ТОО Инфосервис открыто деловым предложениям, касающимся рас-
  пространения нового продукта в России и за ее пределами.

     2. ТОО Инфосервис готово предоставить всем желающим применя-
  емые в архиваторах AIN функции упаковки данных в виде библиоте-
  ки объектных модулей. Имея эти функции, вы сможете использовать
  в своих программах самую совершенную упаковку данных.

     Контактные телефоны: (812) 112-87-60, 166-26-33.
     Факс: 166-36-14.




                         2. АРХИВАТОР AIN


     2.1. Вызов из командной строки

     Архиватор AIN вызывается следующей командой MS DOS:

     AIN <команда> [{/|-}<опция>...] <имя архива>[.AIN]
     [<базовый каталог>\] [@<имя списка>|<шаблон имени файла>...]

     Здесь и  далее используются  традиционные  обозначения  -  в
  квадратных скобках  ([]) указываются  необязательные  синтакси-
  ческие элементы,  в фигурных  ({}) - обязательные, вертикальная
 ---------------------------------------------------------------
                               - 9 -


  черта (|)  означает  "или",  а  многоточие  (...)  -  возможное
  повторение (произвольное число раз) предыдущего элемента.
     Командная строка  может быть  набрана как  прописными, так и
  строчными буквами,  что почти  всегда  безразлично  (исключение
  составляет только значение опции /G).
     В начале командной строки пишется имя вызываемой программы -
  AIN.
     Следующая за  ним <команда> - это буква латинского алфавита,
  определяющая затребованную  у архиватора  функцию (например A -
  добавить файлы  в архив, D - удалить и т.д.). В соответствующих
  разделах настоящего  руководства подробно  описаны все  команды
  AIN.
     Опции определяют  различные режимы работы архиватора. Каждая
  опция начинается  одним из  символов '/'  (косая черта) или '-'
  (минус), после которого следует имя опции - один или два харак-
  терных  символа.  Некоторые  опции  могут  содержать  значение.
  Например, в команде:

                      AIN A /R/GВася ARCHIVE

  опция /R  употреблена без значения, а /G имеет значение "Вася".
  В  команде   может  быть   задано  любое  количество  опций  (в
  частности, ни  одной). Все  допустимые опции  подробно  описаны
  ниже.
     В качестве  имени архива можно использовать любое допустимое
  в MS DOS  имя файла,  который уже содержит архив, или в котором
  будет создан  таковой. Если  в имени  не указано расширение, то
  автоматически приписывается  расширение  .AIN.  Например,  при-
  веденная выше  команда относится  к  архиву  ARCHIVE.AIN.  Если
  необходимо создать  архив в  файле без  расширения, то  в конце
  имени следует поставить точку. Например, команда:

			AIN M ARCHIVE.  *.C

  создает архив в файле ARCHIVE.
     Из базового  каталога читаются  (при упаковке)  и в него за-
  писываются (при  распаковке) подлежащие  обработке  файлы.  На-
  пример, команда:

             AIN A ARCHIVE \PROJECT\SOURCE\ *.C *.ASM

  записывает в  архив файлы  с расширениями .C и .ASM из каталога
  \PROJECT\SOURCE, а команда:

                         AIN E ARCHIVE C:

  извлекает из архива все файлы и записывает их в текущий каталог
  диска С.  Имя базового каталога должно завершаться символом '\'
  (обратная косая  черта) или ':' (двоеточие); в противном случае
  AIN примет  его за  имя первого  из списка подлежащих обработке
  файлов. Если в команде не указан базовый каталог, то в качестве
  такового обычно принимается текущий каталог.
     В конце командной строки записываются имена подлежащих обра-
  ботке файлов.  В соответствии  с традицией  MS DOS,  эти  имена
 ---------------------------------------------------------------
                              - 10 -


  могут включать в себя метасимволы '*' (звездочка) и '?' (вопро-
  сительный знак) и являться, таким образом, шаблонами, определя-
  ющими множество имен файлов. Например, команда:

                    AIN A ARCHIVE D*.PAS *.A??

  записывает в  архив файлы, имена которых начинаются с буквы D и
  имеют расширение  .PAS, и  файлы, имеющие расширения, состоящие
  из трех символов, первый из которых - A.
     Можно  задать   также  один   или  несколько   имен  файлов,
  содержащих   списки имен  (шаблонов имен), подлежащих обработке
  файлов. Перед  именем списка  следует писать  символ '@'  (at).
  Например, команда:

                   AIN D ARCHIVE PROG.EXE @LIST

  при условии, что файл LIST содержит 1 строку:

                          PACK.COM *.BAT

  эквивалентна команде:

               AIN D ARCHIVE PROG.EXE PACK.COM *.BAT

  Файл списка  должен состоять  из одной  или нескольких строк, в
  каждой из  которых может  быть записано  несколько  разделенных
  пробелами имен (или шаблонов).

     Признак опции  (символ '/' или '-') может отделяться от пре-
  дыдущего элемента  командной  строки  произвольным  количеством
  пробелов или  писаться вплотную  к нему. Опции могут писаться в
  любом месте командной строки, например:

               AIN/R U -S/GSTAR ARCHIVE -WC: *.C-M3

     Если некоторая  опция записывается сразу после другой опции,
  которая не  содержит (и  не может содержать) значения, то перед
  ней можно  не ставить  символов '/' и '-', т.е. несколько опций
  можно писать  слитно. Так  предыдущую команду  можно записать в
  таком виде:

                AIN U -SRGSTAR ARCHIVE -WC: *.C-M3

     Символ '-'  (минус) является признаком опции; поэтому невоз-
  можно в  качестве параметра указать файл, имя которого содержит
  этот символ.

     Работу архиватора  можно в  любой момент прервать при помощи
  одновременного нажатия  клавиш CTRL и BREAK. Если в момент пре-
  рывания производилось  обновление архива,  то обновляемый архив
  сохраняется в  том состоянии, в котором он находился до запуска
  AIN.
 ---------------------------------------------------------------
                              - 11 -


     2.2. Команды архиватора

     Архиватор AIN позволяет выполнять следующие команды:

     A - добавить новые файлы в архив и заменить существующие;
     D - удалить файлы из архива;
     E - извлечь файлы из архива;
     F - обновить устаревшие файлы;
     L - выдать информацию о файлах архива;
     M - добавить и удалить добавленные файлы с диска;
     T - проверить целостность архива;
     U - заменить устаревшие файлы и добавить новые;
     V - выдать полную информацию о файлах архива;
     X - извлечь файлы c полными путями;
     Y - изменить характеристики архива.

     Ниже подробно описана каждая из этих команд.

     2.2.1. Команда A - добавить новые файлы в архив и
     заменить существующие

     Команда A записывает файлы в архив. Например, команда:

                AIN A ARCHIVE \SOURCE\ *.PAS *.DOC

  записывает в  архив ARCHIVE.AIN все файлы с расширениями .PAS и
  .DOC из "базового" каталога \SOURCE.
     Если архив,  указанный в команде, существует, то файлы будут
  добавлены в  него, в противном случае будет создан новый архив.
  Создать архив способны несколько команд AIN, однако, как прави-
  ло, архивы создаются именно командой A.
     Если базовый  каталог не задан, то добавляемые файлы берутся
  из текущего каталога.
     Если не  задано ни  одного имени  (или шаблона),  то в архив
  записываются все файлы из базового (или текущего) каталога. Так
  команда:

                           AIN A ARCHIVE

  записывает в  архив все  файлы из  текущего каталога.  Заметим,
  что, хотя  файл архива  ARCHIVE.AIN тоже  находится  в  текущем
  каталоге, действие  команды A  на него не распространяется. Это
  свойство характерно  для всех команд AIN - файл архива, с кото-
  рым работает  архиватор, всегда  исключается из множества обра-
  батываемых файлов.
     Если в  команде указана опция /R, то в архив добавляются все
  соответсвующие шаблону файлы, находящиеся в заданном каталоге и
  в его подкаталогах. Например, команда:

                AIN A /R ARCHIVE \PROJECT\ *.C *.H

  записывает в  архив все  файлы с расширениями .C и .H, содержа-
  щиеся в  каталоге \PROJECT  и его  подкаталогах (в  том числе в
  подкаталогах подкаталогов и т.д.).
 ---------------------------------------------------------------
                              - 12 -


     Команда A  записывает файл  в архив  под именем,  включающим
  указанную в  команде часть   п у т и  к  этому файлу. Например,
  команда:

                 AIN A ACHIVE C:DIR\ TEXT\FILE.DOC

  записывает в  архив файл  с именм  C:DIR\TEXT\FILE.DOC (это имя
  выдается по команде V).
     Если указанный  в команде  файл уже  записан в  архив, то он
  з а м е щ а е т с я (т.е.  старое содержимое  файла  заменяется
  новым). Для того, чтобы AIN правильно осуществлял идентификацию
  файлов (т.е.  решение вопроса  о том,  что  некоторый  файл  из
  файловой системы  и файл  из архива - это "один и тот же" файл)
  рекомендуется всегда  обращаться к архиву в одном и том же сос-
  тоянии MS DOS  (имеется в виду текущий диск и текущий каталог).
  Поясним сказанное  примером. Допустим, при записи в архив файла
  TEXT командой:

                        AIN A ARCHIVE TEXT

  текущим был  диск C.  Затем мы объявили текущим диск D и решили
  заместить файл в архиве:

                       AIN A ARCHIVE C:TEXT

  Однако, в  архиве нет  информации о  том, что  файл TEXT взят с
  диска C,  поэтому эта  команда добавит  в архив  еще один файл.
  Таким образом,  в архиве  будут находится два файла - с именами
  TEXT и C:TEXT (в чем легко убедиться при помощи команды V).
     Опишем формально процесс идентификации. Для файла из архива,
  исходя из  его имени,  записанной части  пути к нему и текущего
  состояния MS DOS,  AIN строит  полный путь (т.е. включающий имя
  диска и  начинающийся от  корневого каталога)  к  этому  файлу.
  Идентификация сводится  к сравнению этого полного пути с полным
  путем  файла  из  файловой  системы.  Из  этого,  в  частности,
  следует, что  если архивировать  файлы  с  полными  путями,  то
  идентификация    всегда    будет    производиться    правильно.
  Рекомендуем, однако,  не полагаться на столь тонкие особенности
  работы программы,  а руководствоваться вышеприведенным правилом
  (следить за  текущим диском/каталогом при создании и обновлении
  архива).

     2.2.2. Команда D - удалить файлы из архива

     Команда D удаляет файлы из архива. Например, команда:

                     AIN D ARCHIVE *.PAS *.DOC

  удаляет из архива все файлы с расширениями .PAS и .DOC.
     Базовый  каталог  (если  таковой  указан  в  команде)  игно-
  рируется.
     Приведенная выше  команда удаляет  из  архива  все  файлы  с
  указанными расширениями независимо от путей, с которыми они за-
 ---------------------------------------------------------------
                              - 13 -


  писаны в архиве. Для того, чтобы путь учитывался, следует упот-
  реблять опцию /P:

               AIN D /P ARCHIVE C:\SOURCE\PROG\*.PAS

  В этом  случае удаляются  только те  файлы с  расширением .PAS,
  которые записаны  в архив с путем C:\SOURCE\PROG. Если опция /P
  имеет значение 1:

                     AIN D /P1 ARCHIVE \S*.PAS

  то действие команды распространяется на все файлы, полные имена
  (т.е. имя  вместе с  записанной в  архиве частью  пути) которых
  удовлетворяют   указанному    шаблону   (например,   на   файлы
  \SOURE\TAX.PAS, \SRC\PROG\DISCO.PAS  распространяется  действие
  данной команды, а на DISCO.PAS - нет).
     Применение команды D приводит к уменьшению размера архива.

     2.2.3. Команда E - извлечь файлы из архива

     Команда E  извлекает файлы  из архива  и записывает их в ба-
  зовый (или в текущий) каталог:

               AIN E ARCHIVE A:\SOURCE\ *.PAS *.DOC

  Здесь файлы  *.PAS и *.DOC извлекаются из архива и записываются
  в каталог A:\SOURCE.
     Все извлекаемые  файлы (независимо  от путей, с которыми они
  записаны в архиве) записываются в один каталог.
     Если в  качестве базового указан не существующий каталог, то
  AIN автоматически создаст его.
     Команда создает  извлекаемый из  архива файл на диске с теми
  датой/временем и атрибутами, которые он имел при архивации.
     Множество подлежащих  обработке файлов  определяется так же,
  как и в команде D, однако, если в команде E не указано ни одно-
  го шаблона, то из архива извлекаются все имеющиеся в нем файлы.
  Например, команда:

                           AIN E ARCHIVE

  записывает все файлы архива в текущий каталог.
     Извлекаемые файлы  не удаляются из архива; он остается в том
  же состоянии.
     Если извлекаемый  файл уже существует в базовом (или в теку-
  щем) каталоге,  то AIN  выдает об  этом сообщение  и вступает в
  переговоры с пользователем по поводу дальнейших действий. Поль-
  зователь может  перезаписать существующий  файл, отказаться  от
  извлечения, записать  извлекаемый файл в другой каталог или за-
  вершить работу архиватора. На консоль компьютера будет выдано:

     <Имя файла> уже существует
     Дата/время: файл <дата/время>, архив <дата/время>
     Перезаписать? [Д/Н/ВД/ВН/З] _
 ---------------------------------------------------------------
                              - 14 -


  Если в  ответ на  этот запрос  пользователь введет с клавиатуры
  буквы Д (да) или ВД (всегда да), то файл будет перезаписан. Ес-
  ли он  ответит буквой З (завершить) - AIN завершит работу. Если
  будут введены  буквы Н (нет) или ВН (всегда нет), то на консоль
  будет выдано:

     Создать файл в другом каталоге? [Д/Н/ВД/ВН/З] _

  Ответы Н  и ВН  здесь означают отказ от извлечения файла и про-
  должение работы.  В случае Д и ВД, AIN предложит ввести имя ка-
  талога, в  который будет  записан извлекаемый  файл. Ввод имени
  каталога завершается  клавишей ENTER;  для удаления неправильно
  введенных  символов  можно  использовать  клавиши  BACKSPACE  и
  "стрелка влево".  Имя каталога  может начинаться  с имени диска
  (вроде A:\UNPACK).  Если введено  имя несуществующего каталога,
  то AIN автоматически создаст его.
     Ответы  "всегда  да"  и  "всегда  нет"  означают,  что  если
  аналогичная ситуация  повторится, то  AIN, не обращаясь к поль-
  зователю, автоматически  примет ответ "да" или "нет". Например,
  если вы  хотите чтобы  все уже сущесвующие файлы не извлекались
  из архива,  достаточно на  первый и  второй  запросы  один  раз
  ответить ВН.

     2.2.4. Команда F - обновить устаревшие файлы

     Команда F  обновляет (перезаписывает) устаревшие файлы архи-
  ва. Например, команда:

                AIN F ARCHIVE \SOURCE\ *.PAS *.DOC

  перезаписывает в  архив те  файлы *.PAS  и  *.DOC  из  каталога
  \SOURCE, которые  уже есть  в архиве  и имеют  там более старую
  дату/время (т.е.  которые были  изменены после предыдущей архи-
  вации).
     Если базовый  каталог не  задан, то в качестве такового, как
  обычно, принимается  текущий каталог.  Если не задано ни одного
  шаблона, то  команда применяется  ко всем  файлам  из  базового
  (текущего) каталога.
     Заметим, что  если при  создании архива использовалась опция
  /R, то и при обновлении этого архива ее, чаще всего, необходимо
  использовать. Например, если архив создан командой:

                    AIN A /R ARCHIVE \PROJECT\

  то для обновления  в с е х  устаревших файлов этого архива сле-
  дует применять команду:

                    AIN F /R ARCHIVE \PROJECT\

  Если в  этой команде  опустить опцию  /R, то  обновляться будут
  только файлы, непосредственно расположенные в каталоге \PROJECT
  (без подкаталогов).
 ---------------------------------------------------------------
                              - 15 -


     Решение о том, что некоторый файл из файловой системы и файл
  из архива  есть "один и тот же" файл, AIN принимает так же, как
  и при замещении файлов командой A.

     2.2.5. Команда L - выдать информацию о файлах архива

     Команда L  выдает информацию  о файлах  архива. Например, по
  команде:

                     AIN L ARCHIVE *.PAS *.DOC

  на консоль  будет  выдана  информация  о  всех  файлах  архива,
  имеющих расширения .PAS и .DOC.
     О каждом  файле выводится  следующая  информация:  имя  (без
  пути), размер, дата и время последнего изменения. Если фрагмент
  архива, к  которому применена  команда, содержит  только начало
  какого-либо файла  (продолжение которого  находится в следующем
  фрагменте), то  после имени  этого файла  ставится  символ  '*'
  (звездочка), а качестве размера указывается длина расположенной
  в  этом   фрагменте  части   файла.  Если   фрагмент   содержит
  продолжение файла,  после имени  такого файла в круглых скобках
  указывается  (отсчитанный  от  нуля)  номер  байта,  начиная  с
  которого файл был записан в этот фрагмент.
     Множество подлежащих  обработке файлов  определяется так же,
  как и  в команде  D, однако,  если в  команде L  не указано  ни
  одного шаблона, то выводится информация обо всех файлах архива.
     После заполнения  выводимой информацией всего экрана AIN ос-
  танавливает вывод и выдает запрос:

     Продолжить? [Д/ВД/З] _

  В случае ответа Д и ВД AIN продолжает выдачу информации, в слу-
  чае З архиватор завершает работу. Вместо Д можно нажать клавишу
  ENTER.
     При помощи  переадресации стандартного  вывода MS DOS  можно
  вывести информацию  о содержимом  архива в  файл на  диске, на-
  пример:

                    AIN L ARCHIVE > ARCHIVE.LST

  Эта команда  выводит информацию  обо всех  файлах архива в файл
  ARCHIVE.LST.

     2.2.6. Команда M - добавить и удалить добавленные файлы с
     диска

     Команда M  производит  те  же  действия,  что  и  команда  A
  (добавление файлов), с той лишь разницей, что команда M удаляет
  с диска записанные в архив файлы.
     Заметим,  что  удаление  файлов  производится  только  после
  окончания  построения   архива,  т.о.  исключается  возможность
  потери данных  в том  случае, когда архив (например, из-за сбоя
  аппаратуры) не построен, а файл уже удален.
 ---------------------------------------------------------------
                              - 16 -


     Команду M  удобно применять,  когда с целью освобождения па-
  мяти на  диске производится упаковка временно не нужных файлов.
  Например, по команде:

                  AIN M /R \PROJECT\ARC \PROJECT\

  целое поддерево файловой системы с вершиной в каталоге \PROJECT
  сворачивается в архив \PROCECT\ARC.AIN. При помощи команды:

                   AIN X \PROJECT\ARC \PROCECT\

  удаленное поддерево  восстанавливается точно  в том  же виде, в
  котором оно находилось до архивации.

     2.2.7. Команда T - проверить целостность архива

     Команда  T  производит  контроль  целостности  (корректности
  структуры) архива, например:

                           AIN T ARCHIVE

     В командной  строке следует  указывать только  команду (T) и
  имя проверяемого  архива, все остальные параметры и опции (если
  таковые указаны) игнорируются.
     Контроль целостности  является надежным способом обнаружения
  случайных (вызванных  физическими дефектами магнитных носителей
  и сбоями  аппаратуры) и  преднамеренных нарушений  в  структуре
  архива или фрагмента.
     О каждом  файле архива, в котором обнаружены ошибки, AIN ин-
  формирует пользователя  соответствующим сообщением.  Работа за-
  вершается выдачей  сообщения о  количестве ошибочных  файлов  в
  архиве (фрагменте). Если файлы, которые AIN признал ошибочными,
  попытаться извлечь  из архива  командами E или X, то, вероятнее
  всего, извлечение  произойдет с ошибками; их рекомендуется уда-
  лить командой D.

     2.2.8. Команда U - заменить устаревшие файлы и добавить
     новые

     Команда U производит те же действия, что и команда A (добав-
  ление файлов),  с той  лишь разницей,  что команда U производит
  замещение только  тех файлов,  которые  имеют  в  архиве  более
  старую дату/время,  чем на диске (т.е. были изменены после пре-
  дыдущей архивации).  Добавление отсутствующих  в архиве  файлов
  производится так же, как и по команде A. Например:

                           AIN U ARCHIVE

  Эта команда  замещает устаревшие в архиве файлы из текущего ка-
  талога и  добавляет те  файлы (из  того же каталога), которых в
  архиве не было.
 ---------------------------------------------------------------
                              - 17 -


     2.2.9. Команда V - выдать полную информацию о файлах
     архива

     Команда V,  подобно команде  L, выдает  информацию о файлах.
  Разница между  этими командами  состоит только  в том,  что  по
  команде V  имена файлов  выдаются вместе  с записанными в архив
  путями к ним.
     Например, если архив был создан командой:

                   AIN M /R ARCHIVE C:\PROJECT\

  то команда:

                           AIN V ARCHIVE

  выдаст список всех файлов из каталога \PROJECT и его подкатало-
  гов с  именами, включающими имя диска (C:) и полные пути к этим
  файлам.
     Напомним, что  в архив  записывается только  та часть пути к
  файлу, которая  была явно указана в команде архивации (см. опи-
  сание команды A).

     2.2.10. Команда X - извлечь файлы c полными путями

     Команда X,  подобно команде  E, извлекает  файлы из  архива.
  Разница между  этими командами  состоит в  том, что  команда  X
  восстанавливает пути  к извлекаемым файлам. Например, если файл
  был записан в архив командой:

                   AIN M ARCHIVE C:\A\B\FILE.TXT

  то команда:

                      AIN X ARCHIVE FILE.TXT

  извлечет из архива файл FILE.TXT и запишет его в каталог C:\A\B
  (команда E извлекла бы его в текущий каталог).
     Если необходимый  для размещения  извлекаемого файла каталог
  отсутствует, то AIN автоматически создаст его.
     Опишем, как  строится путь  к извлекаемому  из архива файлу.
  Если в  команде X не задан базовый каталог, то файл извлекается
  точно с тем же путем, который записан в архиве.
     Если базовый  каталог задан, то от пути, записанного в архи-
  ве,  отбрасывается   имя  диска  (если  таковое  там  есть),  а
  оставшаяся  часть   приписывается  справа   к  имени   базового
  каталога.  Например,  если  к  архиву  из  предыдущего  примера
  применить команду:

                   AIN X ARCHIVE A:DIR\ FILE.TXT

  то извлекаемый файл будет записан в каталог A:DIR\A\B (если та-
  кового на диске A нет, то он будет создан).
 ---------------------------------------------------------------
                              - 18 -


     2.2.11. Команда Y - измененить характеристики архива

     Команда Y  изменяет определяемые  различными опциями AIN ха-
  рактеристики существующего  архива, не изменяя его содержимого.
  Например, команда:

                      AIN Y ARCHIVE /M1/GВася

  переупаковывает архив  в режиме  плотной упаковки (опция /M1) и
  шифрует его с паролем "Вася" (преполагается, что до этого архив
  не был зашифрован).
     Если в  команде использовать  опцию /O,  то измененный архив
  будет записан  на определенный  этой опцией диск/каталог, а ис-
  ходный архив останется в своем прежнем состоянии. Например:

                    AIN Y C:ARCHIVE /OA: /F360

  Эта команда  копирует архив  с диска  C на диск A (опция /OA:),
  разбивая  его   на  фрагменты,   соответствующие   по   размеру
  360K-байтовым дискетам. Архив на диске C не изменяется.

     2.3. Опции архиватора

     Режимы работы  архиватора AIN  определяются  следующими  оп-
  циями:

     F - разделить архив на фрагменты;
     H - выдать справку о программе AIN;
     G - зашифровать архив с паролем;
     M - определить метод упаковки данных;
     O - определить выходной каталог;
     P - использовать полные пути;
     R - искать файлы в подкаталогах;
     S - установить дату/время архива по самому новому файлу;
     U - определить скорость обновления архива;
     W - определить каталог для временных файлов;
     X - исключить файлы из обработки;
     Y - ответить ДА на запрос архиватора.

     Ниже подробно описана каждая из этих опций.

     2.3.1. Опция F - разделить архив на фрагменты

     Опция F управляет разделением архива на фрагменты.
     Архив AIN  может занимать  один или  несколько файлов, назы-
  ваемых  фрагментами.   При  создании  архива  имя  его  первого
  фрагмента (или имя всего архива) указывается в командной строке
  (как правило, оно имеет расширение .AIN), а имена второго и по-
  следующих получаются  приписыванием к  имени архива  расширений
  .001, .002 и т.д. Например, команда:

                        AIN A /F100 ARCHIVE
 ---------------------------------------------------------------
                              - 19 -


  создает фрагменты  ARCHIVE.AIN, ARCHIVE.001, ARCHIVE.002 и т.д.
  Размер каждого из этих фрагментов не превышает 100K байтов.
     Возможные значения опции можно описать так:

                         F{<число>[K|M]|A}

  здесь <число>  указывает размер  фрагмента в килобайтах или ме-
  габайтах в зависимости от следующей за ним буквы - K или M (ес-
  ли буквы  нет -  размер определяется  в килобайтах).  Например,
  опция:

                           F50 или F50K

  определет фрагмент размером 50 килобайтов, а опция:

                               F1.5M

  - 1.5 мегабайта.
     Значение, меньшее 10K, задавать нельзя.
     Если в  качестве значения  указана буква  A, то  AIN создает
  фрагменты, занимающие  все свободное  пространство диска. Заме-
  тим, что  AIN работает  так и в том случае, если опция F вообще
  не задана (т.е. значение A принимается по умолчанию). Например,
  команда:

                          AIN A A:ARCHIVE

  создает архив  на диске A фрагментами, заполняющими все свобод-
  ное пространство (очередной) дискеты.
     Если определенное  опцией F  значение превосходит объем сво-
  бодного пространства  диска, то  AIN создает фрагмент меньшего,
  чем требует  опция, размера.  С диском,  объем свободного  про-
  странства на  котором менее  10K, AIN вообще отказывается рабо-
  тать.
     Если в качестве значения указан объем отформатированного од-
  ним из  стандартных способов  гибкого диска (например 360K), то
  AIN создает  фрагменты, соответствующие  объему доступного про-
  странства сразу  после форматирования  такого диска  (в  случае
  дискет 360K этот объем равен 352K). Например, команда:

                        AIN A /F720 ARCHIVE

  создает фрагменты,  рассчитанные на  дискеты, отформатированные
  на 720K (фактический размер фрагмента 713K), а в команде:

                        AIN A /F1.2 ARCHIVE

  подразумевается вывод на дискеты размеченные на 1.2M (фактичес-
  кий размер - 1185K).
     AIN "знает"  следующие форматы разметки гибких дисков: 160K,
  180K, 320K, 360K, 720K, 800K, 1.2M, 1.44M, 2.88M.
     Если необходимо  создать фрагмент  размером именно 360K (или
  другого стандартного  размера), то  рекомендуется начать запись
  обозначающего размер числа с нуля:
 ---------------------------------------------------------------
                              - 20 -



                       AIN A /F0360 ARCHIVE

     Завершив построение  очередного фрагмента,  AIN выдает соот-
  ветствующее сообщение  и перед  созданием следующего  фрагмента
  обращается к  пользователю с (сопровождаемым звуковым сигналом)
  запросом:

     Cоздать следующий фрагмент в каталоге <DIR> ? [Д/Н/ВД/З] _

  В качестве  <DIR> в сообщение включается полное имя каталога, в
  котором  был  создан  предыдущий  фрагмент.  Если  вы  согласны
  создать фрагмент в этом каталоге, то следует, вставив (если это
  необходимо) в дисковод очередную дискету, ввести Д или ВД. Если
  вы решили  завершить работу  архиватора,  то  следует  ответить
  вводом З. В случае ответа Н, AIN предложит ввести имя каталога,
  в котором  будет создан  следующий фрагмент.  Как  обычно,  имя
  каталога  может  начинаться  с  имени  диска,  т.о.  существует
  возможность размещать  отдельные  фрагменты  одного  архива  на
  разных дисках (дисководах).
     Например, если в процессе архивации у вас кончились дискеты,
  то вы  можете записать  оставшуюся часть  архива на  винчестер.
  Когда дискеты  появятся,  можно  переписать  на  них  последний
  фрагмент (или  фрагменты) с  винчестера с разделением его (если
  это необходимо) на мелкие фрагменты:

                   AIN Y /OA: /FA C:ARCHIVE.003

  Эта команда копирует фрагмент ARCHIVE.003 с диска C на A с раз-
  делением на соответсвующие объему дискет фрагменты.
     Если на  запрос о  создании следующего фрагмента ответить ВД
  (всегда да),  создание следующих фрагментов будет производиться
  автоматически без  запросов к  пользователю. Если создаваемые в
  этом "молчаливом"  режиме  фрагменты  исчерпают  все  свободное
  пространство диска,  AIN все  же обратится к пользователю с тем
  же запросом.
     Опция /YF  также дает  возможность создать  многофрагментный
  архив, не отвечая ни на один запрос AIN:

                     AIN A /YF /F1.2 C:ARCHIVE

  Эта команда  создает на  винчестере C архив, фрагменты которого
  можно в  дальнешем переписать  на дискеты  1.2M (т.о.  наиболее
  длительная часть  работы может  быть произведена  в  отсутствие
  пользователя).

     Многофрагментные архивы могут появляться как в процессе соз-
  дания новых  архивов, так  и при  обновлении уже  существующих.
  Например, команда:

                        AIN F /F360 ARCHIVE

  обновляет устаревшие файлы и разделяет архив на фрагменты.
 ---------------------------------------------------------------
                              - 21 -


     С отдельным  фрагментом можно работать так же, как и с целым
  архивом. Например, команда:

                   AIN E ARCHIVE.002 *.PAS *.DOC

  извлекает указанные файлы из 3-го фрагмента архива.
     При выполнении  не модифицирующих  архив команд (E, L, T, V,
  X),  AIN,   завершив   обработку   одного   фрагмента,   выдает
  пользователю запрос  на обработку  следующего.  Таким  образом,
  одной командой можно обработать все фрагменты архива. Например,
  если у  вас имеется  архив, занимающий несколько дискет, то для
  того, чтобы  полностью разгрузить  его содержимое на винчестер,
  необходимо, вставив  в дисковод A первую дискету архива, ввести
  команду:

                        AIN X A:ARCHIVE C:

  и затем (по требованию AIN) вставлять следующие дискеты.
     Запрос на  обработку следующего фрагмента по форме и возмож-
  ностям полностью аналогичен подробно описанному выше запросу на
  создание фрагмента.
     При выполнении  модифицирующих архив  команд (A, D, F, M, U,
  Y), AIN  обрабатывает только  один, указанный  в команде, фраг-
  мент. Например, команда:

                         AIN F ARCHIVE.001

  обновляет  т о л ь к о  файлы фрагмента ARCHIVE.001.
     Фрагмент может  быть разделен на более мелкие фрагменты (как
  это было показано в одном из вышеприведенных примеров) только в
  том случае, если он является  п о с л е д н и м  фрагментом ар-
  хива.

     2.3.2. Опция H - выдать справку о программе AIN

     Если в команде указана опция H, то на экран компьютера выда-
  ется подробная справка о программе AIN. Справка содержит список
  всех команд,  опций и  несколько примеров использования архива-
  тора. Вместо  H для  получения той  же справки (традиционно для
  программ MS DOS) можно использовать опцию ?:

                              AIN /?

     Никакие другие  действия, кроме выдачи справки по команде, в
  которой указана опция H, AIN не выполняет.
     При заполнении  экрана AIN  останавливает вывод  информации;
  продолжить его проще всего нажатием клавиши ENTER.
     AIN выдает  справку и  в том случае, если в командной строке
  допущены грубые  ошибки (например,  указана неизвестная ему ко-
  манда).
 ---------------------------------------------------------------
                              - 22 -


     2.3.3. Опция G - зашифровать архив с паролем

     Опция G  вызывает шифровку  записанной в  архиве информации.
  Она  может   быть  употреблена  с  любой  модифицирующей  архив
  командой (A,  D, F, M, U, Y). Шифровка может производиться, как
  при создании нового архива, так и при обновлении уже существую-
  щего, например:

                   AIN D /GВася ARCHIVE FILE.TXT

  Эта команда удаляет из архива указанный файл и шифрует оставши-
  еся там файлы с паролем "Вася".
     При всяком  доступе к  зашифрованному архиву  пароль следует
  указывать точно в таком же виде (учитывая различие между строч-
  ными/прописными и  латинскими/русскими буквами),  в котором  он
  был указан при шифровке:

                       AIN L /GВася ARCHIVE

  Эта команда выдает оглавление зашифрованного архива.
     Если в качестве значения опции указать вопросительный знак:

                         AIN A /G? ARCHIVE

  то AIN запросит у пользователя ввод пароля с клавиатуры. В этом
  случае  ввод   происходит  без  отображения  пароля  на  экране
  (вводимые символы  отмечаются кавычками). Клавишами BACKSPACE и
  "стрелка влево" можно  отменить один  или  несколько  введенных
  символов. Завершается ввод пароля клавишей ENTER.
     Если при  доступе  к  зашифрованному  архиву  пароль  указан
  неверно (или  опция G вообще не указана), то AIN также запросит
  ввод пароля с клавиатуры.
     Если необходимо  изменить пароль  зашифрованного архива  или
  снять шифровку, то опцию следует указать в виде:

              G{<старый пароль>|?}=[<новый пароль>|?]

  Например, команда:

                AIN Y /GВася=programmerman ARCHIVE

  сменит пароль "Вася" на "programmerman", а команда:

                  AIN Y /Gprogrammerman=  ARCHIVE

  вообше снимет шифровку с архива.

     Заметим, что,  хотя пароль  шифровки и  не хранится в архиве
  (поэтому, если  вы забыли  пароль, то можете считать информацию
  утраченной), некоторая,  определенным образом  образом снятая с
  пароля контрольная сумма все же запоминается в архиве. Эта кон-
  трольная сумма  (по которой невозможно восстановить сам пароль)
  позволяет практически  во всех  случаях отвергнуть  неправильно
 ---------------------------------------------------------------
                              - 23 -


  введенный пароль и не пытаться производить расшифровку с непра-
  вильным паролем, что неминуемо привело бы к ошибкам.

     Алгоритм шифровки  AIN основан на применении датчика случай-
  ных чисел с периодом, равным 2.8e14. Задача расшифровки, следо-
  вательно, связана  с перебором этого огромного числа вариантов,
  который (даже  с применением  современной компьютерной техники)
  вряд ли возможно осуществить за сколько-нибудь обозримое время.
  Таким образом,  шифровка при помощи AIN предоставляет пользова-
  телю надежный  способ  защиты  конфиденциальной  информации  от
  несанкционированного доступа.

     2.3.4. Опция M - определить метод упаковки данных

     Опция M определяет режим упаковки данных; возможные значения
  таковы:

     1 - плотная упаковка, низкая скорость работы;
     2 - нормальная упаковка (режим по умолчанию);
     3 - слабая упаковка, высокая скорость работы;
     4 - без упаковки.

     Опция может  быть употреблена  с любой  модифицирующей архив
  командой (A, D, F, M, U, Y). Например, команда:

                         AIN A /M3 ARCHIVE

  создает архив в быстром режиме. Значение опции M запоминается в
  архиве, поэтому,  если при доступе к существующему архиву опция
  не указана,  то принимается  то значение, с которым он был соз-
  дан. Так команда:

                           AIN F ARCHIVE

  обновляет (созданный предыдущей командой) архив в быстром режи-
  ме, а команда:

                         AIN Y /M1 ARCHIVE

  переупаковывает его, используя режим плотной упаковки.

     2.3.5. Опция O - определить выходной каталог

     Опция O определяет выходной каталог, т.е. каталог, в который
  будет записан  обновленный командой  архив.  Опция  может  быть
  употреблена с  любой модифицирующей архив командой (A, D, F, M,
  U, Y). Например, команда:

                    AIN Y /OA:\ /F360 C:ARCHIVE

  копирует архив с диска C в корневой каталог диска A.
     Если опция  O не  указана, то  обновленный архив  пишется на
  место  обновляемого.  Если  команда  создает  новый  архив,  то
  значение опции игнорируется.
 ---------------------------------------------------------------
                              - 24 -


     Опцию O удобно использовать для копирования архива с винчес-
  тера на дискеты с разделением его на фрагменты соответствующего
  размера.

     2.3.6. Опция P - использовать полные пути

     Опция P включает режим учета путей при определении множества
  подлежащих обработке  файлов архива. Употребляется с командами,
  манипулирующими содержащимися в архиве файлами (D, E, L, V, X).
  Например, команда:

                      AIN D /P ARCHIVE *.PAS

  удалит из  архива только  те файлы,  которые записаны без путей
  (скажем, файл  DISCO.PAS будет  удален, а  \SOURCE\DISCO.PAS  -
  нет); если  эту команду  исполнить без  /P, то удалятся  в с е 
  файлы с расширением .PAS.
     Если в  команде явно  задан путь  к файлу,  то автоматически
  подразумевается опция P:

                  AIN V /P ARCHIVE \SOURCE\*.PAS

  Команда выдает  информацию о файлах *.PAS, записанных в архив с
  путем \SOURCE;  она работала  бы точно  так же и без указания в
  ней опции P.
     Если опция P употреблена со значением 1:

                     AIN D /P1 ARCHIVE \S*.PAS

  то действие команды распространяется на все файлы, полные имена
  (т.е. имя  вместе с  записанной в  архиве частью  пути) которых
  удовлетворяют   указанному    шаблону   (например,   на   файлы
  \SOURE\TAX.PAS, \SRC\PROG\DISCO.PAS  распространяется  действие
  данной команды, а на DISCO.PAS - нет).

     2.3.7. Опция R - искать файлы в подкаталогах

     Опция R  включает режим поиска файлов в подкаталогах. Напри-
  мер, команда:

                    AIN A /R ARCHIVR \PROCECT\

  записывает в архив все файлы с расширением .PAS, содержащиеся в
  каталоге \PROJECT  и в его подкаталогах (в том числе в подката-
  логах подкаталогов  и т.д.); если эту команду исполнить без /R,
  то будут обработаны только файлы из каталога \PROJECT.
     Опция может быть употреблена в командах A, F, M, U.

     2.3.8. Опция S - установить дату/время архива по самому
     новому файлу

     Опция S заставляет AIN установить создаваемому или обновляе-
  мому архиву  дату/время, совпадающую  с  датой/временем  самого
  нового файла архива. Например, команда:
 ---------------------------------------------------------------
                              - 25 -



                         AIN F /S ARCHIVE

  установит обновляемому  архиву дату/время  самого нового из со-
  держащихся в  нем файлов;  без опции  /S архив  получил бы  да-
  ту/время, соответствующую моменту исполнения данной команды.
     Опция S  может быть употреблена с любой модифицирующей архив
  командой (A, D, F, M, U, Y).

     2.3.9. Опция U - определить скорость обновления архива

     Опция U  определяет скорость  обновления  архива;  возможные
  значения таковы:

     1 - низкая скорость обновления (умолчание);
     2 - нормальная скорость;
     3 - высокая скорость обновления.

     "Скорость обновления  архива" означает  быстроту  выполнения
  команд, замещающих  файлы в архиве (A, D, F, M, U) или извлека-
  ющих их  из него  (E, X),  причем в том случае, когда суммарный
  размер этих  файлов составляет  незначительную часть  от общего
  объема архива  (например, в  случае замещения одного небольшого
  файла). Подчеркнем, что опция определяет не быстроту исполнения
  данной команды (т.е. той, в которой опция употреблена), а быст-
  роту выполнения  указанных операций по отношению к создаваемому
  (или изменяемому) данной командой архиву.
     Опция может  быть употреблена  с любой  модифицирующей архив
  командой (A, D, F, M, U, Y). Например, команда:

                         AIN A /U3 ARCHIVE


  создает архив, обновление которого будет происходить быстро.
     Значение опции  U (подобно  опции M)  запоминается в архиве,
  поэтому, если  при доступе к существующему архиву опция не ука-
  зана, то  принимается то  значение, с  которорым он был создан.
  Так команда:

                           AIN F ARCHIVE

  быстро обновляет (созданный предыдущей командой) архив и сохра-
  няет его в быстрообновляемом состоянии, а команда:

                         AIN Y /U1 ARCHIVE

  превращает его в медленнообновляемый.
     Медленная скорость обновления может приводить к существенно-
  му повышению  характеристик  упаковки  (как  плотности,  так  и
  скорости).  Это  особенно  заметно  проявляется  при  архивации
  множества однотипных файлов; в случае разнотипных - характерис-
  тики упаковки  повышаются незначительно или даже несколько сни-
  жаются.
 ---------------------------------------------------------------
                              - 26 -


     2.3.10. Опция W - определить каталог для временных файлов

     Опция W  определяет рабочий каталог, в котором AIN размещает
  временные файлы. Например, при выполнении команды:

                       AIN F /WC: A:ARCHIVE

  AIN, обновляя  архив, размещенный  на диске  A, временные файлы
  будет создавать в текущем каталоге диска C.
     Заметим, что при обновлении существующего архива AIN создает
  новый (обновленный)  вариант этого  архива во  временном файле,
  сохраняя до  самого конца  работы исходный  архив (в целях сох-
  ранения информации  в случае  возможного сбоя аппаратуры). Если
  опция W  не указана, то этот временный архив создается в том же
  каталоге  (и,   естественно,  на   том  же  диске),  в  котором
  размещается обновляемый архив, для чего на диске должно иметься
  необходимое количество свободного пространства. Если свободного
  пространства недостаточно,  то возникает ситуация "переполнение
  диска"  и  AIN  завершает  работу  (исходный  архив  при  этом,
  естественно, сохраняется).

     Поэтому, в  случае обновления  архивов на дискетах, которые,
  как правило, занимают почти все пространство диска, настоятель-
  но рекомендуется  определять при помощи опции W рабочий каталог
  на винчестере или на другой дискете.

     2.3.11. Опция X - исключить файлы из обработки

     Опция X  исключает указанные  файлы из  обработки. Например,
  команда:

                AIN A ARCHIVE *.EXE /XNC*.* /XFC*.*

  записывает в  архив все  имеющие расширение .EXE файлы текущего
  каталога, за исключением тех, которые начинаются с NC и FC.
     Опция X  может быть употреблена несколько раз в любой коман-
  де, в  которой задается  множество подлежащих  обработке файлов
  (A, D,  E, F, L, M, U, V, X). Если команда производит обработку
  файлов из  архива (E,  L, V,  X), то  при  определении  области
  действия опции X учитывается значение опции P. Например, по ко-
  манде:

                  AIN V /X\PROJECT\*.PAS ARCHIVE

  информация о файле \PROJECT\SOURCE\DISCO.PAS будет выдана (если
  таковой имеется в архиве), а по команде:

                AIN V /P1 /X\PROJECT\*.PAS ARCHIVE

  информация о  нем не  выдается, т.к.  на него в этом случае ра-
  спространяется действие опции X.
 ---------------------------------------------------------------
                              - 27 -


     2.3.12. Опция Y - ответить ДА на запрос архиватора

     Опция Y  задает ответ "да" на обращенный к пользователю зап-
  рос AIN; возможные значения таковы:

     F - запрос о переходе к следующему фрагменту архива;
     O - запрос о перезаписи существующего файла.

     Если значение  опции не  указано, то  задается положительный
  ответ на  в с е  запросы программы.
     В качестве примера приведем команду:

                      AIN A /F360 /YF ARCHIVE

  которая записывает  все фрагменты  создаваемого архива  на один
  диск, не обращаясь к пользователю при создании очередного фраг-
  мента.

     2.4. Переменная окружения AIN_SW

     Архиватор AIN читает свои опции как из командной строки, так
  и из  специальной переменной окружения AIN_SW. Например, если в
  файле AUTOEXEC.BAT указана команда:

                       SET AIN_SW=/M3/U3/WC:

  то все  команды AIN  будет выполнять  в  режимах,  определяемых
  опциями /M3/U3/WC:  (если в  командной строке  явно не  указано
  противное).
     Если для  некоторой опции  в командной строке указано значе-
  ние, отличное  от того,  которое определено  для той же опции в
  переменной AIN_SW, то принимается значение, указанное в команд-
  ной строке  (т.е. опции  в командной  строке отменяют установки
  AIN_SW).
     Например, команда:

                        AIN A /U2/R ARCHIVE

  выполняется с  опциями /U2/R  (взятыми из  командной строки)  и
  /M3/WC: (из переменной AIN_SW).
     Для того, чтобы при обновлении архивов на дискетах не возни-
  кала ситуация "переполнение диска" (см. 2.3.10) рекомендуется в
  переменную AIN_SW  записать опцию  W,  определяющую  размещение
  временных файлов  на  винчестере  (вроде  той,  что  указана  в
  примере).
 ---------------------------------------------------------------
                              - 28 -


                         3. УТИЛИТА AINEXT

     Утилита AINEXT версии 2.1 предназначена для просмотра и рас-
  паковки    архивов,  созданных  архиватором  AIN  2.1.  Утилита
  представляет собой сокращенную версию архиватора, способную вы-
  полнять команды выдачи информации и извлечения файлов из архива
  (E, L, V, X). Вызов программы AINEXT из командной строки MS DOS
  аналогичен вызову AIN:

     AINEXT <команда> [{/|-}<опция>...] <имя архива>[.AIN]
     [<базовый каталог>\] [@<имя списка>|<шаблон имени файла>...]

     В командной  строке можно  использовать команды E, L, V, X и
  опции P, H, G, X, Y.
     Утилита AINEXT,  в отличие  от  AIN,  игнорирует  переменную
  окружения AIN_SW  (см. 2.4);  на работу  AINEXT  влияют  только
  опции, явно указанные в командной строке.
     Утилита AINEXT  способна работать  с архивами, состоящими из
  нескольких фрагментов, так же, как это делает AIN.
     Исполнение AINEXT  дает точно  такой же результат, что и ис-
  полнение AIN  c теми  же параметрами. Приведем несколько приме-
  ров.

     Пример 1
                         AINEXT E ARCHIVE

  Команда извлекает  из архива ARCHIVE.AIN все файлы и записывает
  их в текущий каталог.

     Пример 2

              AINEXT X /X*.EXE /GВася ARCHIVE A: P*.*

  Команда извлекает  из  архива, защищенного паролем "Вася", фай-
  лы, имеющие  имена, начинающиеся  с 'P', и расширения, отличные
  от EXE.  Файлы извлекаются  с полными  путями и записываются на
  диск A.

     Пример 3

                  AINEXT V ARCHIVE > ARCHIVE.LST

  Команда выводит  информацию  обо  всех  файлах  архива  в  файл
  ARCHIVE.LST.

     Утилиту AINEXT  удобно использовать  для передачи  архива  в
  другие организации, у которых может не оказаться архиватора AIN
  (в частности,  для  поставок  программных  продуктов).  В  этом
  случае на  дискету вместе  с архивом  рекомендуется  записывать
  именно утилиту  AINEXT, а не сам AIN - это позволяет сэкономить
  пространство на  дискете (файл  AINEXT.EXE существенно  короче,
  чем AIN.EXE)  и  избежать  нарушения  авторских  прав  ТОО  Ин-
  фосервис.
 ---------------------------------------------------------------
                              - 29 -


                         4. УТИЛИТА AINEXE

     Утилита AINEXE версии  2.1 представляет собой упаковщик EXE-
  файлов. Утилита применяется для экономии пространства на дисках
  за  счет  (достигаемого  упаковкой)  уменьшения  размеров  EXE-
  файлов. Утилиту  можно применять  только для файлов, предназна-
  ченных для исполнения в среде операционной системы MS DOS.
     Большие файлы  (размером 100K и более) AINEXE уменьшает, как
  правило, в  2 - 3 раза,  средние (20-100K)  - в  1.5 - 2  раза.
  Размеры маленьких  файлов в  результате применения утилиты либо
  уменьшаются незначительно, либо даже увеличиваются.
     Упакованный утилитой  EXE-файл вызывается  точно так же, как
  он вызывался  до упаковки  и сохраняет все свои экплуатационные
  характеристики.
     Утилита вызывается из командной строки MS DOS с единственным
  параметром - именем EXE-файла:

                     AINEXE <имя файла>[.EXE]

  Расширение .EXE  можно не  указывать; например, чтобы упаковать
  файл DISCO.EXE, достаточно выдать команду:

                           AINEXE DISCO

     После успешного завершения утилиты указанный параметром файл
  будет упакован.  Исходное состояние файла сохраняется в файле с
  расширением .OLD (если таковой уже существует, то AINEXE, выдав
  соответствующее сообщение,  завершает работу).  После  проверки
  работоспособности упакованного  файла его  (файл с  расширением
  .OLD) можно  удалить; если  же упакованный  файл  не  работает,
  расширение .OLD  нужно опять  сменить на  .EXE  (удалив,  таким
  образом, упакованный файл).
     Основной причиной,  по которой упакованный файл может оказа-
  ться неработоспособным,  является наличие  в нем дополнительной
  (не загружаемой  MS DOS при  запуске программы)  информации.  В
  этом случае  AINEXE выдает  сообщение об  этом и  обращается  к
  пользователю с запросом по поводу дальнейших действий:

  1 - отменить упаковку
  2 - присоединить дополнительную информацию к упакованному файлу
  3 - отбросить дополнительную информацию

  Если пользователь  в ответ на запрос введет с клавиатуры символ
  1, то  AINEXE, сохранив  файл неупакованным, завершит работу. В
  случае ввода  2 или  3, AINEXE присоединит к упакованному файлу
  (или, соответственно, отбросит) дополнительную информацию.
     Перечислим наиболее  вероятные источники  дополнительной ин-
  формации в EXE-файлах:

     1. Необходимая для  работы отладчиков информация (записывае-
        тся в  EXE-файлы системами программирования TURBO PASCAL,
        BORLAND C++ и  др.). Эту  информацию  можно  отбросить  -
        файл, скорее  всего, останется  работоспособным,  однако,
 ---------------------------------------------------------------
                              - 30 -


        применение отладчика  к такой  программе станет, конечно,
        невозможным.

     2. Некоторая неизменяемая  база данных  программы (например,
        выдаваемая по  опции /H  справка). В случае присоединения
        этой информации  к упакованному  файлу, программа, вполне
        возможно, сохранит рабоспособность во всех своих аспектах
        (в том  числе и связанных с использованием дополнительной
        информации).

     3. Оверлейные (подгружаемые  в процессе работы) программы. В
        этом случае следует отказаться от упаковки - опыт показы-
        вает, что упаковка нарушает работу оверлейного механизма.

     Если утилита AINEXE вызвана без параметров или с опциями /H,
  /?, то она выдает на экран справочную информацию о себе.

     На полезный  побочный эффект применения утилиты AINEXE, свя-
  занный с  защитой упакованной  программы от несанкционированных
  изменений, указано в 1.2.