{ Программа установки шрифта пользователя }
{ * TSN * Associate, 22.09.1997, ┼Sn }

uses crt; { Подключим модуль работы с консолью }
const n=4; { Указываем количество символов в нашем шрифте }
      k=1; { Указываем номер второго загружаемого блока знакогенератора }

{ Опишем символы нашего шрифта }
const MyFont: array [1..n, 1..8] of byte=(
                                    ($ff,$81,$81,$81,$81,$81,$81,$ff),
                                    ($00,$7e,$7e,$7e,$7e,$7e,$7e,$00),
                                    ($00,$00,$3c,$3c,$3c,$3c,$00,$00),
                                    ($00,$00,$00,$18,$18,$00,$00,$00)
                                    );

{ Процедура установки нового шрифта }
procedure Font (var sss); assembler;
asm
  { Установим шрифт 8*8 в блоке 0 }
  mov ah,11h; { Указываем номер функции работы со шрифтами }
  mov al,12h; { Указываем номер подфункции загрузки шрифта 8*8 }
  mov bl,0;   { Указываем номер загружаемого блока знакогенератора }
  int 10h;    { Вызываем Video - сервис }

  { Установим шрифт 8*8 в блоке 1 }
  mov ah,11h; mov al,12h; mov bl,k; int 10h;

  { Установим свой шрифт в блоке 1 }
  les bp, sss; { Загружаем ES:BP адресом нашего шрифта }
  mov ah,11h;  { Указываем номер функции работы со шрифтами }
  mov al,10h;  { Указываем номер подфункции загрузки нашего шрифта }
  mov bh,8h;   { Указываем высоту (в точках) символов нашего шрифта }
  mov bl,k;   { Указываем номер загружаемого блока знакогенератора }
  mov cx,n;    { Указываем количество символов в нашем шрифте }
  mov dx,0ach; { Указываем код первого символа нашего шрифта }
  int 10h;     { Вызываем Video - сервис }

 { Сделаем активным 0 и 1 блок }
  mov ah,11h; mov al,3h; mov bl,4
  ; int 10h;
end;

begin
clrscr; textcolor(15); { Очистим экран и установим нужный цвет символов }
writeln ('Демонстрация перегрузки шрифтов');
{writeln('* TSN * Associate'); writeln;}
textcolor(7); { Очистим экран и установим нужный цвет символов }
{writeln('* TSN * Associate'); {writeln;  }
writeln ('Демонстрация перегрузки шрифтов'); readln;
writeln('... ПРОИЗВЕДЕНО ПЕРЕКЛЮЧЕНИЕ ДИСПЛЕЯ НА ШРИФТ 8*8');
writeln('... ПРОИЗВЕДЕНА АКТИВАЦИЯ БЛОКА 1');
Font(MyFont); readln;

asm
 { Сделаем активным только блок 0 и восстановим яркость символов }
  mov ah,11h; mov al,3h; mov bl,0h; int 10h;
end;

writeln('... ПРОИЗВЕДЕНА ДЕАКТИВАЦИЯ БЛОКА 1');
{ Сделаем паузу для просмотра содержимого экрана }
readln;

asm
  { Установим шрифт 8*14 в блоке 0 }
  mov ah,11h; mov al,11h; mov bl,0; int 10h;
end;

writeln('... ВОССТАНОВЛЕН ПЕРВОНАЧАЛЬНЫЙ ШРИФТ');
readln;
end.
